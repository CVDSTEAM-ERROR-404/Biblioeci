<html xmlns="http://www.w3c.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">


<h:head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <!--===============================================================================================-->
    <link rel="icon" type="image/png" href="/images/icons/eci.ico"/>
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/vendor/bootstrap/css/bootstrap.min.css"/>
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/fonts/font-awesome-4.7.0/css/font-awesome.min.css"/>
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/fonts/Linearicons-Free-v1.0.0/icon-font.min.css"/>
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/vendor/animate/animate.css" />
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/vendor/css-hamburgers/hamburgers.min.css"/>

    <link rel="stylesheet" type="text/css" href="/vendor/select2/select2.min.css"/>

    <link rel="stylesheet" type="text/css" href="/css/util.css"/>
    <link rel="stylesheet" type="text/css" href="/css/main.css"/>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
          rel="stylesheet" />
</h:head>

<h:body>
    <h:form id="misreservas_form" autocomplete="off" >
        <p:growl id="growl" showDetail="false" sticky="true" />

        <p:panel class="panelCenter" id="panelreserva"   style="width: 900px;">

            <p:tabView  >
            <p:tab title="Mis reservas"  >
                    <p:dataTable     var="res" value="#{ReservasBean.consultarReservasActivasUsuario()}"
                                     paginator="true" paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
                                  rowsPerPageTemplate="5,10,15"
                                  currentPageReportTemplate="Página: ({currentPage} de {totalPages})"
                                  paginatorPosition="bottom" rows="10" style="width:750px;"  >

                    <f:facet name="header" style="color:black;">
                        Reservas
                    </f:facet>

                        <p:column headerText="Recurso"  width="120">
                            <h:outputText value="#{res.getRecurso().getNombre()}" />
                        </p:column>

                        <p:column headerText="Tipo"  width="160">
                            <h:outputText value="#{res.getTipo().name()}" />
                        </p:column>

                        <p:column headerText="Fecha Solicitud">
                            <h:outputText value="#{res.getFechaSolicitud()}" />

                        </p:column>

                        <p:column headerText="Mas opciones">
                            <center>
                            <p:commandLink update="misreservas_form:outgrid" oncomplete="PF('reservaDialog').show()" style="background:white;">
                                <i class="material-icons" style="color:black !important;" >
                                    add_circle_outline
                                </i>

                                <f:setPropertyActionListener  value="#{res}" target="#{ReservasBean.selectedReserva}" />
                            </p:commandLink>
                            </center>

                        </p:column>


                    </p:dataTable>
             </p:tab>


                <p:tab title="Mis reservas pasadas">
                    <p:dataTable     var="res" value="#{ReservasBean.consultarReservasPasadasUsuario()}"
                                     paginator="true" paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
                                     rowsPerPageTemplate="5,10,15"
                                     currentPageReportTemplate="Página: ({currentPage} de {totalPages})"
                                     paginatorPosition="bottom" rows="10" style="width:750px;"  >

                        <f:facet name="header" style="color:black;">
                            Reservas
                        </f:facet>

                        <p:column headerText="Recurso"  width="120">
                            <h:outputText value="#{res.getRecurso().getNombre()}" />
                        </p:column>

                        <p:column headerText="Tipo"  width="160">
                            <h:outputText value="#{res.getTipo().name()}" />
                        </p:column>

                        <p:column headerText="Fecha Solicitud">
                            <h:outputText value="#{res.getFechaSolicitud()}" />
                        </p:column>

                        <p:column headerText="Mas opciones">
                            <center>
                                <p:commandLink update="misreservas_form:outgrid2" oncomplete="PF('reservaDialog2').show()" style="background:white;">
                                    <i class="material-icons" style="color:black !important;" >
                                        add_circle_outline
                                    </i>

                                    <f:setPropertyActionListener  value="#{res}" target="#{ReservasBean.selectedReserva}" />
                                </p:commandLink>
                            </center>

                        </p:column>


                    </p:dataTable>
                </p:tab>


                <p:tab title="Mis reservas canceladas"  >
                    <p:dataTable     var="res" value="#{ReservasBean.consultarReservasCanceladasUsuario()}"
                                     paginator="true" paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
                                     rowsPerPageTemplate="5,10,15"
                                     currentPageReportTemplate="Página: ({currentPage} de {totalPages})"
                                     paginatorPosition="bottom" rows="10" style="width:750px;"  >

                        <f:facet name="header" style="color:black;">
                            Reservas
                        </f:facet>

                        <p:column headerText="Recurso"  width="120">
                            <h:outputText value="#{res.getRecurso().getNombre()}" />
                        </p:column>

                        <p:column headerText="Tipo"  width="160">
                            <h:outputText value="#{res.getTipo().name()}" />
                        </p:column>

                        <p:column headerText="Fecha Solicitud">
                            <h:outputText value="#{res.getFechaSolicitud()}" />
                        </p:column>

                        <p:column headerText="Mas opciones">
                            <center>
                                <p:commandLink update="misreservas_form:outgrid2" oncomplete="PF('reservaDialog2').show()" style="background:white;">
                                    <i class="material-icons" style="color:black !important;" >
                                        add_circle_outline
                                    </i>

                                    <f:setPropertyActionListener  value="#{res}" target="#{ReservasBean.selectedReserva}" />
                                </p:commandLink>
                            </center>

                        </p:column>


                    </p:dataTable>
                </p:tab>

            </p:tabView>


            <p:dialog header="Mas opciones" widgetVar="reservaDialog"  resizable="false" >

                <p:outputPanel id="outgrid" style="text-align:center; width:450px;"  >

                        <h:commandButton class="buttonp" value="Cancelar" style="font-size:12px; "  update="misreservas_form"/>

                    <h:outputLink value="infoReservas.xhtml"
                                  styleClass="ui-button  ui-button-text-only" style="font-size:12px; color:FFF;  border-radius: 3px;">
                        <span class="ui-button-text" style="padding: 15px 25px;" >Ver info</span>
                    </h:outputLink>

                </p:outputPanel>

            </p:dialog>


            <p:dialog header="Mas opciones" widgetVar="reservaDialog2"  resizable="false" >

                <p:outputPanel id="outgrid2" style="text-align:center; width:450px;"  >


                    <h:outputLink value="infoReservas.xhtml"
                                  styleClass="ui-button  ui-button-text-only" style="font-size:12px; color:FFF;  border-radius: 3px;">
                        <span class="ui-button-text" style="padding: 15px 25px;" >Ver info</span>
                    </h:outputLink>

                </p:outputPanel>

            </p:dialog>

            <f:facet name="footer">
                <center>
                    <h:commandButton update="misreservas_form" class="button3"   value="Volver" style="font-size:12px;" actionListener="#{LoginBean.goHome()}" />
                </center>
            </f:facet>

        </p:panel>

    </h:form>
</h:body>
</html>